(this["webpackJsonpjwt-boilerplate"]=this["webpackJsonpjwt-boilerplate"]||[]).push([[0],{150:function(e,t,n){},151:function(e,t,n){},164:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(54),c=n.n(r),o=(n(149),n(150),n(21)),s=n(10),i=(n(151),n(31)),l=n.n(i),u=n(55),j=n(40),d=n(35),h=n(3);function p(e){return Object(h.jsx)("span",{className:"error",children:e.error})}var b=n(184),O=n(132),m=n(180),x=n(186),f=n(183);function g(){var e=localStorage.getItem("token");e&&(JSON.parse(atob(e.split(".")[1])).exp<Date.now()/1e3&&(localStorage.removeItem("token"),e=null));return e}var v={setToken:function(e){e?localStorage.setItem("token",e):localStorage.removeItem("token")},getToken:g,removeToken:function(){localStorage.removeItem("token")},getUserFromToken:function(){var e=g();return e?JSON.parse(atob(e.split(".")[1])).user:null}},w="/api/users/";var k={signup:function(e){return fetch(w+"signup",{method:"POST",body:e}).then((function(e){if(e.ok)return e.json();throw new Error("Email already taken!")})).then((function(e){var t=e.token;return v.setToken(t)}))},logout:function(){v.removeToken()},login:function(e){return fetch(w+"login",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();throw new Error("Bad Credentials!")})).then((function(e){var t=e.token;return v.setToken(t)}))},getUser:function(){return v.getUserFromToken()}},y=n(187);function S(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(""),g=Object(o.a)(i,2),v=(g[0],g[1],Object(a.useState)({username:"",email:"",password:"",passwordConf:"",emoji:""})),w=Object(o.a)(v,2),S=w[0],C=w[1],N=Object(s.g)(),T=Object(a.useState)(!1),A=Object(o.a)(T,2);A[0],A[1];function I(e){C(Object(d.a)(Object(d.a)({},S),{},Object(j.a)({},e.target.name,e.target.value)))}function P(){return(P=Object(u.a)(l.a.mark((function t(n){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r in n.preventDefault(),a=new FormData,S)a.append(r,S[r]);return t.prev=3,t.next=6,k.signup(a);case 6:e.handleSignUpOrLogin(),N.push("/"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),console.log(t.t0.message),c(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[3,10]])})))).apply(this,arguments)}return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(b.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(h.jsxs)(b.a.Column,{style:{maxWidth:450},children:[Object(h.jsx)(O.a,{src:"yass.png"}),Object(h.jsxs)(m.a,{autoComplete:"off",onSubmit:function(e){return P.apply(this,arguments)},children:[Object(h.jsxs)(x.a,{stacked:!0,children:[Object(h.jsx)(m.a.Input,{name:"username",placeholder:"username",value:S.username,onChange:I,required:!0}),Object(h.jsx)(m.a.Input,{type:"email",name:"email",placeholder:"email",value:S.email,onChange:I,required:!0}),Object(h.jsx)(m.a.Input,{name:"password",type:"password",placeholder:"password",value:S.password,onChange:I,required:!0}),Object(h.jsx)(m.a.Input,{name:"passwordConf",type:"password",placeholder:"Confirm Password",value:S.passwordConf,onChange:I,required:!0}),Object(h.jsx)(y.a,{row:!0,children:Object(h.jsxs)("select",{name:"emoji",defaultValue:"",value:S.emoji,onChange:I,required:!0,children:[Object(h.jsx)("option",{disabled:!0,value:"",children:"Pick an emoji"}),Object(h.jsx)("option",{value:"0",children:"\ud83d\udc7b"}),Object(h.jsx)("option",{value:"1",children:"\ud83d\udc7d"}),Object(h.jsx)("option",{value:"2",children:"\ud83e\uddd1"}),Object(h.jsx)("option",{value:"3",children:"\ud83d\udc69"}),Object(h.jsx)("option",{value:"4",children:"\ud83d\udc68"}),Object(h.jsx)("option",{value:"5",children:"\ud83e\uddd3"}),Object(h.jsx)("option",{value:"6",children:"\ud83d\udc75"}),Object(h.jsx)("option",{value:"7",children:"\ud83d\udc74"})]})}),Object(h.jsx)("br",{}),Object(h.jsx)(f.a,{color:"blue",fluid:!0,size:"large",type:"submit",className:"btn",children:"Signup"})]}),r?Object(h.jsx)(p,{error:r}):null]})]})})})}n(164);var C=n(39),N=n(182);function T(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)({email:"",password:""}),g=Object(o.a)(i,2),v=g[0],w=g[1],y=Object(s.g)();function S(e){w(Object(d.a)(Object(d.a)({},v),{},Object(j.a)({},e.target.name,e.target.value)))}function T(){return(T=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,k.login(v);case 4:e.handleSignUpOrLogin(),y.push("/"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),c(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(b.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(h.jsxs)(b.a.Column,{style:{maxWidth:450},children:[Object(h.jsx)(O.a,{src:"yass.png"}),Object(h.jsx)(m.a,{autoComplete:"off",onSubmit:function(e){return T.apply(this,arguments)},children:Object(h.jsxs)(x.a,{stacked:!0,children:[Object(h.jsx)(m.a.Input,{type:"email",name:"email",placeholder:"email",value:v.email,onChange:S,required:!0}),Object(h.jsx)(m.a.Input,{name:"password",type:"password",placeholder:"password",value:v.password,onChange:S,required:!0}),Object(h.jsx)(f.a,{color:"blue",fluid:!0,size:"large",type:"submit",className:"btn",children:"Sign In"})]})}),Object(h.jsxs)(N.a,{children:["Are you new here? ",Object(h.jsx)(C.b,{to:"/signup",children:"Sign Up!"})]}),r?Object(h.jsx)(p,{error:r}):null]})})})}var A=n(116),I=(n(165),["\ud83d\udc7b","\ud83d\udc7d","\ud83e\uddd1","\ud83d\udc69","\ud83d\udc68","\ud83e\uddd3","\ud83d\udc75","\ud83d\udc74"]);function P(e){var t=e.user,n=e.handleLogout;return Object(h.jsxs)(x.a,{className:"navigation",clearing:!0,children:[Object(h.jsxs)("div",{className:"title",children:[Object(h.jsx)("div",{className:"yass-title",children:"YASS\ud83d\udc4d"}),Object(h.jsx)("div",{className:"or-title",children:"or"}),Object(h.jsx)("div",{className:"pass-title",children:"PASS\ud83d\udc4e"})]}),Object(h.jsx)("div",{className:"emoji",children:I[t]}),Object(h.jsx)("div",{className:"logout",children:Object(h.jsx)(C.b,{to:"",onClick:n,children:"Logout"})})]})}function U(e){var t=Object(a.useState)({content:""}),n=Object(o.a)(t,2),r=n[0],c=n[1];return Object(h.jsx)(b.a,{textAlign:"center",verticalAlign:"middle",children:Object(h.jsx)(b.a.Column,{style:{maxWidth:450},children:Object(h.jsx)(x.a,{children:Object(h.jsxs)(m.a,{autoComplete:"off",onSubmit:function(t){t.preventDefault();var n=new FormData;n.append("content",r.content),e.handleAddPost(n)},children:[Object(h.jsx)(m.a.Input,{className:"form-control",name:"content",value:r.content,placeholder:"What would you like to post?",onChange:function(e){c(Object(d.a)(Object(d.a)({},r),{},Object(j.a)({},e.target.name,e.target.value)))},required:!0}),Object(h.jsx)(f.a,{type:"submit",className:"btn",children:"ADD POST"})]})})})})}n(166);var L=n(181);var q=function(e){var t=e.post;return Object(h.jsxs)("div",{className:"col",children:[Object(h.jsx)("h1",{children:"Mi Casa"}),Object(h.jsx)("p",{children:"This is my house y'all!"}),t.map((function(e){return Object(h.jsx)("div",{children:t.content})}))]})};function D(e){var t=e.posts;return Object(h.jsx)(L.a.Group,{itemsPerRow:"1",stackable:!0,children:t.map((function(e){return Object(h.jsx)(q,{post:e})}))})}var F="/api/posts";function W(e){return fetch(F,{method:"POST",body:e,headers:{Authorization:"Bearer "+v.getToken()}}).then((function(e){return e.json()}))}function B(){return fetch(F,{headers:{Authorization:"Bearer "+v.getToken()}}).then((function(e){return e.json()}))}function E(e){var t=e.user,n=e.handleLogout,r=Object(a.useState)([]),c=Object(o.a)(r,2),s=c[0],i=c[1];function j(){return(j=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,W(t);case 3:n=e.sent,console.log(n.post," This is newPup",n," data var"),i((function(e){return[n.post].concat(Object(A.a)(e))}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B();case 3:t=e.sent,i(Object(A.a)(t.posts)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0," this is the error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){d.apply(this,arguments)}()}),[]),Object(h.jsxs)("div",{className:"feed-container",children:[Object(h.jsx)(P,{user:t.emoji,handleLogout:n}),Object(h.jsx)(U,{handleAddPost:function(e){return j.apply(this,arguments)}}),Object(h.jsx)(D,{posts:s})]})}var J=function(){var e=Object(a.useState)(k.getUser()),t=Object(o.a)(e,2),n=t[0],r=t[1];function c(){r(k.getUser())}return Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)(s.d,{children:[Object(h.jsx)(s.b,{exact:!0,path:"/login",children:Object(h.jsx)(T,{handleSignUpOrLogin:c})}),Object(h.jsx)(s.b,{exact:!0,path:"/signup",children:Object(h.jsx)(S,{handleSignUpOrLogin:c})}),k.getUser()?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(s.d,{children:Object(h.jsx)(s.b,{exact:!0,path:"/",children:Object(h.jsx)(E,{handleLogout:function(){k.logout(),r({user:null})},user:n})})})}):Object(h.jsx)(s.a,{to:"/login"})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(h.jsx)(C.a,{children:Object(h.jsx)(J,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[167,1,2]]]);
//# sourceMappingURL=main.050640c5.chunk.js.map