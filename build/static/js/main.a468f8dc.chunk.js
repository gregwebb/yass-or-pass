(this["webpackJsonpjwt-boilerplate"]=this["webpackJsonpjwt-boilerplate"]||[]).push([[0],{150:function(e,t,n){},151:function(e,t,n){},164:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(55),c=n.n(a),s=(n(149),n(150),n(18)),o=n(10),i=(n(151),n(29)),l=n.n(i),u=n(56),j=n(41),d=n(35),b=n(2);function h(e){return Object(b.jsx)("span",{className:"error",children:e.error})}var p=n(185),O=n(131),m=n(182),x=n(187),f=n(184);function v(){var e=localStorage.getItem("token");e&&(JSON.parse(atob(e.split(".")[1])).exp<Date.now()/1e3&&(localStorage.removeItem("token"),e=null));return e}var g={setToken:function(e){e?localStorage.setItem("token",e):localStorage.removeItem("token")},getToken:v,removeToken:function(){localStorage.removeItem("token")},getUserFromToken:function(){var e=v();return e?JSON.parse(atob(e.split(".")[1])).user:null}},w="/api/users/";function k(){return fetch(w+"users",{headers:{Authorization:"Bearer "+g.getToken()}}).then((function(e){return e.json()}))}var S={signup:function(e){return fetch(w+"signup",{method:"POST",body:e}).then((function(e){if(e.ok)return e.json();throw new Error("Email already taken!")})).then((function(e){var t=e.token;return g.setToken(t)}))},logout:function(){g.removeToken()},login:function(e){return fetch(w+"login",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();throw new Error("Bad Credentials!")})).then((function(e){var t=e.token;return g.setToken(t)}))},getUser:function(){return g.getUserFromToken()},getAll:k},y=n(188);function N(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(""),v=Object(s.a)(i,2),g=(v[0],v[1],Object(r.useState)({username:"",email:"",password:"",passwordConf:"",emoji:""})),w=Object(s.a)(g,2),k=w[0],N=w[1],C=Object(o.g)(),A=Object(r.useState)(!1),I=Object(s.a)(A,2);I[0],I[1];function T(e){N(Object(d.a)(Object(d.a)({},k),{},Object(j.a)({},e.target.name,e.target.value)))}function U(){return(U=Object(u.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a in n.preventDefault(),r=new FormData,k)r.append(a,k[a]);return t.prev=3,t.next=6,S.signup(r);case 6:e.handleSignUpOrLogin(),C.push("/"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),console.log(t.t0.message),c(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[3,10]])})))).apply(this,arguments)}return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(p.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(b.jsxs)(p.a.Column,{style:{maxWidth:450},children:[Object(b.jsx)(O.a,{src:"yass.png"}),Object(b.jsxs)(m.a,{autoComplete:"off",onSubmit:function(e){return U.apply(this,arguments)},children:[Object(b.jsxs)(x.a,{stacked:!0,children:[Object(b.jsx)(m.a.Input,{name:"username",placeholder:"username",value:k.username,onChange:T,required:!0}),Object(b.jsx)(m.a.Input,{type:"email",name:"email",placeholder:"email",value:k.email,onChange:T,required:!0}),Object(b.jsx)(m.a.Input,{name:"password",type:"password",placeholder:"password",value:k.password,onChange:T,required:!0}),Object(b.jsx)(m.a.Input,{name:"passwordConf",type:"password",placeholder:"Confirm Password",value:k.passwordConf,onChange:T,required:!0}),Object(b.jsx)(y.a,{row:!0,children:Object(b.jsxs)("select",{name:"emoji",defaultValue:"",value:k.emoji,onChange:T,required:!0,children:[Object(b.jsx)("option",{disabled:!0,value:"",children:"Pick an emoji"}),Object(b.jsx)("option",{value:"0",children:"\ud83d\udc7b"}),Object(b.jsx)("option",{value:"1",children:"\ud83d\udc7d"}),Object(b.jsx)("option",{value:"2",children:"\ud83e\uddd1"}),Object(b.jsx)("option",{value:"3",children:"\ud83d\udc69"}),Object(b.jsx)("option",{value:"4",children:"\ud83d\udc68"}),Object(b.jsx)("option",{value:"5",children:"\ud83e\uddd3"}),Object(b.jsx)("option",{value:"6",children:"\ud83d\udc75"}),Object(b.jsx)("option",{value:"7",children:"\ud83d\udc74"})]})}),Object(b.jsx)("br",{}),Object(b.jsx)(f.a,{color:"blue",fluid:!0,size:"large",type:"submit",className:"btn",children:"Signup"})]}),a?Object(b.jsx)(h,{error:a}):null]})]})})})}n(164);var C=n(34),A=n(183);function I(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)({email:"",password:""}),v=Object(s.a)(i,2),g=v[0],w=v[1],k=Object(o.g)();function y(e){w(Object(d.a)(Object(d.a)({},g),{},Object(j.a)({},e.target.name,e.target.value)))}function N(){return(N=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,S.login(g);case 4:e.handleSignUpOrLogin(),k.push("/"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),c(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(p.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(b.jsxs)(p.a.Column,{style:{maxWidth:450},children:[Object(b.jsx)(O.a,{src:"yass.png"}),Object(b.jsx)(m.a,{autoComplete:"off",onSubmit:function(e){return N.apply(this,arguments)},children:Object(b.jsxs)(x.a,{stacked:!0,children:[Object(b.jsx)(m.a.Input,{type:"email",name:"email",placeholder:"email",value:g.email,onChange:y,required:!0}),Object(b.jsx)(m.a.Input,{name:"password",type:"password",placeholder:"password",value:g.password,onChange:y,required:!0}),Object(b.jsx)(f.a,{color:"blue",fluid:!0,size:"large",type:"submit",className:"btn",children:"Sign In"})]})}),Object(b.jsxs)(A.a,{children:["Are you new here? ",Object(b.jsx)(C.b,{to:"/signup",children:"Sign Up!"})]}),a?Object(b.jsx)(h,{error:a}):null]})})})}var T=n(116),U=(n(165),["\ud83d\udc7b","\ud83d\udc7d","\ud83e\uddd1","\ud83d\udc69","\ud83d\udc68","\ud83e\uddd3","\ud83d\udc75","\ud83d\udc74"]);function L(e){var t=e.user,n=e.handleLogout;return Object(b.jsxs)(x.a,{className:"navigation",clearing:!0,children:[Object(b.jsxs)("div",{className:"title",children:[Object(b.jsx)("div",{className:"yass-title",children:"YASS\ud83d\udc4d"}),Object(b.jsx)("div",{className:"or-title",children:"or"}),Object(b.jsx)("div",{className:"pass-title",children:"PASS\ud83d\udc4e"})]}),Object(b.jsx)("div",{className:"emoji",children:U[t]}),Object(b.jsx)("div",{className:"logout",children:Object(b.jsx)(C.b,{to:"",onClick:n,children:"Logout"})})]})}function q(e,t){t.user;var n=Object(r.useState)({content:""}),a=Object(s.a)(n,2),c=a[0],o=a[1];return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(p.a,{textAlign:"center",children:Object(b.jsx)(p.a.Column,{style:{maxWidth:450},children:Object(b.jsxs)(m.a,{autoComplete:"off",onSubmit:function(t){t.preventDefault();var n=c;console.log(c),console.log(n),e.handleAddPost(n)},children:[Object(b.jsx)(m.a.Input,{name:"content",placeholder:"Ask about something here...",value:c.content,onChange:function(e){o(Object(d.a)(Object(d.a)({},c),{},Object(j.a)({},e.target.name,e.target.value)))},required:!0}),Object(b.jsx)(f.a,{type:"submit",className:"btn",children:"See what people think"})]})})})})}n(166);var F=function(e){var t=e.post;return Object(b.jsx)("div",{className:"post-card",children:t.content})};function P(e){var t=e.posts;return Object(b.jsx)("div",{className:"posts",children:t.map((function(e){return Object(b.jsx)(F,{post:e})}))})}var J="/api/posts/";function W(e){return fetch(J,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))}function D(){return fetch(J).then((function(e){return e.json()}))}n(167);var E=function(e){var t=e.user;return Object(b.jsxs)("div",{className:"vibe-card",children:[Object(b.jsx)("div",{className:"vibe-name",children:t.username}),Object(b.jsx)("div",{className:"emoji-vibe",children:["\ud83d\udc7b","\ud83d\udc7d","\ud83e\uddd1","\ud83d\udc69","\ud83d\udc68","\ud83e\uddd3","\ud83d\udc75","\ud83d\udc74"][t.emoji]})]})};function B(e){var t=e.users;return Object(b.jsxs)("div",{className:"vibe",children:["You Vibe With",t.map((function(e){return Object(b.jsx)(E,{user:e})})),t.map((function(e){return Object(b.jsx)(E,{user:e})}))]})}n(168);function z(e){var t=e.user,n=e.handleLogout,a=Object(r.useState)([]),c=Object(s.a)(a,2),o=c[0],i=c[1],j=Object(r.useState)([]),d=Object(s.a)(j,2),h=d[0],p=d[1];function O(){return(O=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D();case 3:t=e.sent,i(Object(T.a)(t.posts)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0," this is the error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function m(){return(m=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k();case 3:t=e.sent,p(Object(T.a)(t.users)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0," this is the error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){O.apply(this,arguments)}(),function(){m.apply(this,arguments)}()}),[]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"feed-container",children:[Object(b.jsx)(L,{user:t.emoji,handleLogout:n}),Object(b.jsx)("div",{className:"vibe-container",children:Object(b.jsx)(B,{users:h})}),Object(b.jsxs)("div",{className:"post-container",children:[Object(b.jsx)(q,{handleAddPost:function(e){W(e)},user:t}),Object(b.jsx)(P,{posts:o})]})]})})}var V=function(){var e=Object(r.useState)(S.getUser()),t=Object(s.a)(e,2),n=t[0],a=t[1];function c(){a(S.getUser())}return Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)(o.d,{children:[Object(b.jsx)(o.b,{exact:!0,path:"/login",children:Object(b.jsx)(I,{handleSignUpOrLogin:c})}),Object(b.jsx)(o.b,{exact:!0,path:"/signup",children:Object(b.jsx)(N,{handleSignUpOrLogin:c})}),S.getUser()?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(o.d,{children:Object(b.jsx)(o.b,{exact:!0,path:"/",children:Object(b.jsx)(z,{handleLogout:function(){S.logout(),a({user:null})},user:n})})})}):Object(b.jsx)(o.a,{to:"/login"})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(b.jsx)(C.a,{children:Object(b.jsx)(V,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[169,1,2]]]);
//# sourceMappingURL=main.a468f8dc.chunk.js.map